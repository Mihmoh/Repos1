//Лаб7.15. Дана строка символов. Слова в строке отделяются друг от друга одним пробелом. Удалить из строки самое длинное слово. 

#include <locale.h>
#include <stdio.h>
#include <windows.h>

int main()
{
	setlocale(LC_ALL, "Russian");	
	int l=0,k=0,max=0,del=0,sme=0, i=0;	//l - длина строки, k - количество букв в слове. max - количество букв в длиннейшем слове,
	int n=0,m=0;								//del - количество букв до максимального слова, smet - переменная для смещения символов
	char* str;
	printf("Введите кол-во символов в строке\n");
	scanf_s("%d", &m);
	m += 2;
	str = (char*)malloc(m * sizeof(char));
	printf("Введите строкy \n");
	rewind(stdin);
	fgets(str, m, stdin);
	printf("\n");
	printf("%s", str);

	for (l = 0; str[l] != '\n'; l++); // нахождение длины строки	
	for (int i = 0; i < l; i++)
	{
		if (str[i] != ' ')
		{
			k++;  //измерение длины слова
		}
		if (str[i] == ' ' || l - i == 1)    
		{
			if (k >= max)
			{
				max = k;
				del = i - max;  //нахождение длины самого длинного слова и положения первой его буквы
			}
			k = 0;  //обнуление длины слова для измерения длины следующего
		}
	}

	for (int i = del; i < l; i++)
	{
		if (i + max + 1 < l && max != l)
		{
			sme = str[i];
			str[i] = str[i + max + 1];         // смещение символов
			str[i + max + 1] = sme;
		}		
	}
	if (max == l)
	{
		str[0] = '\0';
		printf("Самое длинное в строке слово состоит из такого количества символов %d\n", max);
		printf("Строка состояла из одного слова и теперь пуста\n");
		puts(str);
	}
	else
	{
		str[l - max - 1] = '\0';
		printf("Самое длинное в строке слово состоит из такого количества символов: %d\n", max);
		printf("Изменённая строка: \n");
		puts(str);
	}	
}
